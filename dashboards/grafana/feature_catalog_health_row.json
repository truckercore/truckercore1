{
  "type": "row",
  "title": "Feature Catalog â€” Health",
  "panels": [
    {
      "type": "stat",
      "title": "Cache Hit Rate (5m)",
      "targets": [
        { "expr": "sum(rate(fn_cache_hits_total[5m])) / clamp_min(sum(rate(fn_requests_total[5m])),1)" }
      ],
      "fieldConfig": { "defaults": { "unit": "percentunit", "thresholds": { "mode": "absolute", "steps": [ { "color": "red", "value": 0 }, { "color": "orange", "value": 0.7 }, { "color": "green", "value": 0.9 } ] } } }
    },
    {
      "type": "stat",
      "title": "429s per Minute",
      "targets": [
        { "expr": "sum(rate(fn_http_responses_total{code=\"429\"}[5m]))" }
      ],
      "fieldConfig": { "defaults": { "unit": "ops", "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": 0 }, { "color": "orange", "value": 1 }, { "color": "red", "value": 5 } ] } } }
    },
    {
      "type": "stat",
      "title": "5xx Rate (5m)",
      "targets": [
        { "expr": "sum(rate(fn_http_responses_total{code=~\"5..\"}[5m])) / clamp_min(sum(rate(fn_requests_total[5m])),1)" }
      ],
      "fieldConfig": { "defaults": { "unit": "percentunit", "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": 0 }, { "color": "orange", "value": 0.01 }, { "color": "red", "value": 0.03 } ] } } }
    },
    {
      "type": "stat",
      "title": "Unmapped Prices",
      "targets": [
        { "expr": "sum(feature_unmapped_prices)" }
      ],
      "fieldConfig": { "defaults": { "unit": "none", "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": 0 }, { "color": "red", "value": 1 } ] } } }
    },
    {
      "type": "table",
      "title": "Last Audit Actor",
      "targets": [
        { "expr": "topk(10, feature_audit_last_actor_timestamp)" }
      ],
      "options": { "showHeader": true }
    }
  ]
}
