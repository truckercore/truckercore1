(()=>{var e={};e.id=5768,e.ids=[5768],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3758:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>s.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>o}),n(4338),n(32029),n(11930),n(12523);var a=n(23191),i=n(88716),r=n(37922),s=n.n(r),c=n(95231),l={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>c[e]);n.d(t,l);let o=["",{children:["fleet",{children:["[fleetId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,4338)),"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\fleet\\[fleetId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(n.bind(n,32029)),"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(n.bind(n,11930)),"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(n.bind(n,12523)),"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\not-found.tsx"]}],d=["C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\fleet\\[fleetId]\\page.tsx"],u="/fleet/[fleetId]/page",h={require:n,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/fleet/[fleetId]/page",pathname:"/fleet/[fleetId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},14811:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,12994,23)),Promise.resolve().then(n.t.bind(n,96114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,79671,23)),Promise.resolve().then(n.t.bind(n,41868,23)),Promise.resolve().then(n.t.bind(n,84759,23))},74254:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,79404,23)),Promise.resolve().then(n.bind(n,30623)),Promise.resolve().then(n.bind(n,39328))},22462:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,79404,23))},35303:()=>{},30623:(e,t,n)=>{"use strict";function a(){return null}n.d(t,{DevSeedLoader:()=>a}),n(17577),n(9266)},39328:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var a=n(10326),i=n(17577),r=n.n(i),s=n(73056);function c(){return"id-"+Math.random().toString(36).slice(2,10).replace(/[^a-z0-9]/g,"")}class l{async createVehicle(e){let t={...e,id:c(),createdAt:new Date,updatedAt:new Date,version:1};return await s.k6.vehicles.add(t),await this.queueSync("create",t),t}async updateVehicle(e,t){let n=await s.k6.vehicles.get(e);if(!n)throw Error("Vehicle not found");let a={...n,...t,updatedAt:new Date,version:n.version+1};return await s.k6.vehicles.put(a),await this.queueSync("update",a),a}async deleteVehicle(e){let t=await s.k6.vehicles.get(e);t&&(await s.k6.vehicles.delete(e),await this.queueSync("delete",t))}async getVehicle(e){return s.k6.vehicles.get(e)}async getFleetVehicles(e,t){let n=t?.limit??100,a=t?.offset??0,i=s.k6.vehicles.where("[fleetId+status]").equals([e,t?.status??void 0]);return t?.status||(i=s.k6.vehicles.where("fleetId").equals(e)),await i.offset(a).limit(n).toArray()}async getFleetStatistics(e){let t,n,a,i;let r=await s.k6.vehicles.where("fleetId").equals(e).toArray(),c=r.length,l=(t="active",r.filter(e=>e.status===t).length),o=(n="in_use",r.filter(e=>e.status===n).length),d=(a="maintenance",r.filter(e=>e.status===a).length),u=(i="out_of_service",r.filter(e=>e.status===i).length),h=c?r.reduce((e,t)=>e+(t.odometer||0),0)/c:0;return{total:c,active:l,inUse:o,maintenance:d,outOfService:u,utilizationRate:c?o/c*100:0,averageOdometer:h}}async searchVehicles(e,t){let n=t.toLowerCase();return(await s.k6.vehicles.where("fleetId").equals(e).toArray()).filter(e=>e.vin.toLowerCase().includes(n)||e.licensePlate.toLowerCase().includes(n)||e.make.toLowerCase().includes(n)||e.model.toLowerCase().includes(n))}async getVehiclesDueForMaintenance(e,t=7){let n=await s.k6.vehicles.where("fleetId").equals(e).toArray(),a=new Date(Date.now()+864e5*t);return n.filter(e=>e.nextMaintenance&&e.nextMaintenance<=a)}async queueSync(e,t){let n={id:c(),entityType:"vehicle",entityId:t.id,operation:e,data:t,timestamp:new Date,userId:"current-user",synced:!1,retryCount:0};await s.k6.syncOperations.add(n)}}let o=new l;function d(){return"id_"+Math.random().toString(36).slice(2,10)}class u{constructor(){this.checkInterval=null}static getInstance(){return u.instance||(u.instance=new u),u.instance}startScheduler(e=36e5){this.stopScheduler(),this.checkInterval=setInterval(()=>{this.runMaintenanceCheck()},e),this.runMaintenanceCheck(),console.log("[Maintenance] Scheduler started")}stopScheduler(){this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)}async runMaintenanceCheck(){console.log("[Maintenance] Running maintenance check...");try{for(let e of(await s.k6.vehicles.toArray()))await this.checkVehicleMaintenance(e);console.log("[Maintenance] Check complete")}catch(e){console.error("[Maintenance] Check failed:",e)}}async checkVehicleMaintenance(e){let t=await s.k6.maintenanceSchedules.where("vehicleId").equals(e.id).first();if(!t){await this.createDefaultSchedule(e);return}this.isMaintenanceDue(e,t)&&await this.scheduleMaintenance(e,t),await this.checkPredictiveMaintenance(e)}isMaintenanceDue(e,t){let n=new Date;return"time"===t.scheduleType?t.nextDue<=n:"mileage"===t.scheduleType&&(t.lastCompleted,t.nextDue<=n)}async scheduleMaintenance(e,t){if(await s.k6.workOrders.where("vehicleId").equals(e.id).and(e=>"pending"===e.status||"scheduled"===e.status).first())return;let n={id:d(),vehicleId:e.id,scheduleId:t.id,status:"pending",priority:this.determinePriority(t),tasks:t.tasks,scheduledDate:this.calculateScheduledDate(t),createdAt:new Date,updatedAt:new Date};await s.k6.workOrders.add(n),await o.updateVehicle(e.id,{status:"maintenance",nextMaintenance:n.scheduledDate}),await this.notifyMaintenance(e,n),await this.updateScheduleNextDue(t)}determinePriority(e){let t=this.calculateDaysOverdue(e);return t>30?"critical":t>14?"high":t>7?"medium":"low"}calculateDaysOverdue(e){return Math.floor((new Date().getTime()-e.nextDue.getTime())/864e5)}calculateScheduledDate(e){return new Date(Date.now()+6048e5)}async updateScheduleNextDue(e){let t;t=new Date("time"===e.scheduleType?e.nextDue.getTime()+864e5*e.interval:Date.now()+7776e6),await s.k6.maintenanceSchedules.update(e.id,{lastCompleted:new Date,nextDue:t})}async notifyMaintenance(e,t){try{if("Notification"in window){let t=Notification.permission;"granted"===t&&new Notification("Maintenance Scheduled",{body:`${e.make} ${e.model} (${e.licensePlate}) scheduled`,icon:"/maintenance-icon.png"})}}catch{}}async checkPredictiveMaintenance(e){for(let t of(await this.analyzePredictiveFactors(e)))t.confidence>.7&&await this.createPredictiveWorkOrder(e,t)}async analyzePredictiveFactors(e){let t=[],n=await this.calculateMileageRate(e);return n>500&&t.push({type:"oil_change",reason:"High mileage usage detected",confidence:.8,estimatedDate:this.projectNextMaintenance(e,n)}),new Date().getFullYear()-e.year>5&&t.push({type:"inspection",reason:"Vehicle age exceeds 5 years",confidence:.75,estimatedDate:new Date(Date.now()+2592e6)}),t}async createPredictiveWorkOrder(e,t){if(await s.k6.workOrders.where("vehicleId").equals(e.id).and(e=>"pending"===e.status&&e.tasks.some(e=>e.category===t.type)).first())return;let n={id:d(),vehicleId:e.id,status:"pending",priority:"medium",tasks:[{id:d(),name:`Predictive: ${t.type}`,category:t.type,description:t.reason,estimatedDuration:60,priority:"medium"}],scheduledDate:t.estimatedDate,notes:`Predictive (${(100*t.confidence).toFixed(0)}% confidence)`,createdAt:new Date,updatedAt:new Date};await s.k6.workOrders.add(n)}async calculateMileageRate(e){let t=Math.max(1,Math.floor((Date.now()-e.createdAt.getTime())/864e5));return(e.odometer||0)/t}projectNextMaintenance(e,t){return new Date(Date.now()+5e3/Math.max(1,t)*864e5)}async completeWorkOrder(e,t){let n=await s.k6.workOrders.get(e);if(!n)throw Error("Work order not found");await s.k6.workOrders.update(e,{status:"completed",completedDate:new Date,cost:t.cost,parts:t.parts,labor:t.labor,notes:t.notes,updatedAt:new Date});let a=await s.k6.vehicles.get(n.vehicleId);a&&await o.updateVehicle(a.id,{status:"active",lastMaintenance:new Date})}async getMaintenanceDashboard(e){let t=await s.k6.vehicles.where("fleetId").equals(e).toArray(),n=new Set(t.map(e=>e.id)),a=(await s.k6.workOrders.toArray()).filter(e=>n.has(e.vehicleId)),i=a.filter(e=>"pending"===e.status).length,r=a.filter(e=>"scheduled"===e.status).length,c=a.filter(e=>"in_progress"===e.status).length,l=a.filter(e=>"completed"===e.status).length,o=a.filter(e=>"completed"===e.status).reduce((e,t)=>e+(t.cost||0),0),d=t.filter(e=>e.nextMaintenance&&e.nextMaintenance<=new Date(Date.now()+2592e6)).length;return{summary:{totalVehicles:t.length,pendingWorkOrders:i,scheduledWorkOrders:r,inProgressWorkOrders:c,completedThisMonth:l,totalCostThisMonth:o,upcomingMaintenance:d},recentWorkOrders:a.sort((e,t)=>(t.createdAt?.getTime?.()||0)-(e.createdAt?.getTime?.()||0)).slice(0,10),vehiclesDueSoon:t.filter(e=>e.nextMaintenance&&e.nextMaintenance<=new Date(Date.now()+6048e5)).slice(0,10)}}}function h(){let[e,t]=r().useState(!1),[n,i]=r().useState(36e5),s=t=>{i(t),localStorage.setItem("maintenance_scheduler_interval_ms",String(t)),e&&u.getInstance().startScheduler(t)};return(0,a.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:[a.jsx("button",{onClick:()=>{let a=!e;t(a),localStorage.setItem("maintenance_scheduler_enabled",String(a)),a?u.getInstance().startScheduler(n):u.getInstance().stopScheduler()},children:e?"Stop Maintenance Scheduler":"Start Maintenance Scheduler"}),(0,a.jsxs)("label",{children:["Interval (ms):",a.jsx("input",{type:"number",value:n,onChange:e=>s(Number(e.target.value)),min:1e4,step:1e4,style:{marginLeft:8}})]})]})}u.getInstance()},73056:(e,t,n)=>{"use strict";n.d(t,{Cj:()=>c,k6:()=>s});var a=n(93864),i=n(9266);class r extends a.ZP{constructor(){super("FleetManagementDB"),this.version(1).stores({vehicles:"id, fleetId, status, nextMaintenance, [fleetId+status]",fleets:"id, organizationId, name",maintenanceSchedules:"id, vehicleId, nextDue, [vehicleId+nextDue]",workOrders:"id, vehicleId, status, [vehicleId+status]",syncOperations:"id, entityType, entityId, synced, timestamp",syncConflicts:"id, entityType, entityId, resolvedAt"}),this.on("ready",async()=>{try{await (0,i.o5)()}catch(e){console.warn("[Demo] initializeDemoData failed",e)}})}}let s=new r;async function c(e){}},9266:(e,t,n)=>{"use strict";async function a(){}n.d(t,{o5:()=>a}),n(73056)},4338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var a=n(19510);n(71159);var i=n(57371),r=n(68570);let s=(0,r.createProxy)(String.raw`C:\Users\moise\IdeaProjects\truckercore1\apps\web\src\components\maintenance\MaintenanceSettings.tsx#default`),c=(0,r.createProxy)(String.raw`C:\Users\moise\IdeaProjects\truckercore1\apps\web\src\components\DevSeedLoader.tsx#DevSeedLoader`);function l({params:e}){let{fleetId:t}=e;return(0,a.jsxs)("div",{style:{padding:16},children:[a.jsx(c,{}),a.jsx("h1",{children:"Fleet Overview"}),(0,a.jsxs)("p",{children:["Fleet ID: ",t]}),(0,a.jsxs)("div",{style:{display:"flex",gap:16,marginTop:12},children:[a.jsx(i.default,{href:`/fleet/${t}/vehicles`,children:"Vehicles"}),a.jsx(i.default,{href:`/fleet/${t}/maintenance`,children:"Maintenance"})]}),(0,a.jsxs)("div",{style:{marginTop:24},children:[a.jsx("h3",{children:"Maintenance Scheduler"}),a.jsx(s,{})]})]})}},32029:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r,metadata:()=>i});var a=n(19510);let i={title:"TruckerCore",description:"Trucking Management System"};function r({children:e}){return a.jsx("html",{lang:"en",children:a.jsx("body",{children:e})})}},11930:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var a=n(19510);function i(){return(0,a.jsxs)("div",{style:r.container,children:[a.jsx("div",{style:r.spinner}),a.jsx("p",{style:r.text,children:"Loading..."})]})}let r={container:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#0F1216",color:"#ffffff"},spinner:{width:"48px",height:"48px",border:"4px solid #2A313A",borderTop:"4px solid #58A6FF",borderRadius:"50%",animation:"spin 1s linear infinite"},text:{marginTop:"16px",fontSize:"16px",color:"#8B949E"}}},12523:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var a=n(19510),i=n(57371);function r(){return(0,a.jsxs)("div",{style:s.container,children:[a.jsx("h1",{style:s.title,children:"404"}),a.jsx("h2",{style:s.subtitle,children:"Page Not Found"}),a.jsx("p",{style:s.description,children:"The page you're looking for doesn't exist or has been moved."}),(0,a.jsxs)("div",{style:s.links,children:[a.jsx(i.default,{href:"/",style:s.primaryLink,children:"Go Home"}),a.jsx(i.default,{href:"https://app.truckercore.com",style:s.secondaryLink,children:"Launch App"})]})]})}let s={container:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"24px",backgroundColor:"#0F1216",color:"#ffffff",textAlign:"center"},title:{fontSize:"96px",fontWeight:700,background:"linear-gradient(135deg, #58A6FF 0%, #79C0FF 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",marginBottom:"16px"},subtitle:{fontSize:"32px",fontWeight:600,marginBottom:"16px",color:"#ffffff"},description:{fontSize:"18px",color:"#8B949E",marginBottom:"32px",maxWidth:"500px"},links:{display:"flex",gap:"16px",flexWrap:"wrap",justifyContent:"center"},primaryLink:{padding:"14px 32px",backgroundColor:"#58A6FF",color:"#000",borderRadius:"8px",fontWeight:600,fontSize:"16px",transition:"all 0.2s"},secondaryLink:{padding:"14px 32px",border:"2px solid #58A6FF",color:"#58A6FF",borderRadius:"8px",fontWeight:600,fontSize:"16px",transition:"all 0.2s"}}}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),a=t.X(0,[8948,6779,3864],()=>n(3758));module.exports=a})();