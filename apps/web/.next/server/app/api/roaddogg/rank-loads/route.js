"use strict";(()=>{var e={};e.id=9246,e.ids=[9246],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},83443:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>h,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>g});var a={};r.r(a),r.d(a,{POST:()=>u});var o=r(49303),s=r(88716),i=r(60670),n=r(87070),p=r(71615),d=r(67721);async function u(e){let t=(0,p.cookies)(),r=(0,d.createServerClient)("https://dummy.supabase.co","dummy_key_here_for_build",{cookies:{get:e=>t.get(e)?.value}}),{data:a}=await r.auth.getUser(),o=a.user?.id,s={};try{s=await e.json()}catch{}let i={};try{let{data:e}=await r.rpc("get_claims");i=e||{}}catch{}let u=i.app_org_id||s.org_id;if(!o||!u)return n.NextResponse.json({ok:!1,error:"unauthorized"},{status:401});let c=Array.isArray(s?.candidates)?s.candidates:[],l=Number.isFinite(s?.limit)?s.limit:25,g=await fetch("https://dummy.supabase.co/functions/v1/rank-loads",{method:"POST",headers:{Authorization:`Bearer ${process.env.SUPABASE_SERVICE_ROLE_KEY}`,"Content-Type":"application/json","x-app-org-id":String(u),"x-app-uid":String(o)},body:JSON.stringify({user_id:o,org_id:u,candidates:c,limit:l}),cache:"no-store"}),x=await g.json().catch(()=>({ok:!1,error:"bad_response"}));return n.NextResponse.json(x,{status:g.status})}let c=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/roaddogg/rank-loads/route",pathname:"/api/roaddogg/rank-loads",filename:"route",bundlePath:"app/api/roaddogg/rank-loads/route"},resolvedPagePath:"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\api\\roaddogg\\rank-loads\\route.ts",nextConfigOutput:"standalone",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:g,serverHooks:x}=c,m="/api/roaddogg/rank-loads/route";function h(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[8948,5972,4738,9702],()=>r(83443));module.exports=a})();