"use strict";(()=>{var e={};e.id=3075,e.ids=[3075],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},55067:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>_,requestAsyncStorage:()=>l,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v});var s={};t.r(s),t.d(s,{GET:()=>d,dynamic:()=>c,runtime:()=>u});var o=t(49303),i=t(88716),a=t(60670),n=t(87070),p=t(94738);let u="nodejs",c="force-dynamic";async function d(){let e=(0,p.eI)("https://dummy.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY),r=new Date(Date.now()-6048e5).toISOString(),{data:t}=await e.from("csv_ingest_usage").select("org_id, bytes, occurred_at").gte("occurred_at",r),s={};(t??[]).forEach(e=>{s[e.org_id]=(s[e.org_id]||0)+(e.bytes||0)});let o=Object.entries(s).map(([e,r])=>({org_id:e,bytes:r})).sort((e,r)=>r.bytes-e.bytes).slice(0,20);return n.NextResponse.json({ok:!0,top_orgs_7d:o})}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/admin/metrics/csv/route",pathname:"/api/admin/metrics/csv",filename:"route",bundlePath:"app/api/admin/metrics/csv/route"},resolvedPagePath:"C:\\Users\\moise\\IdeaProjects\\truckercore1\\apps\\web\\src\\app\\api\\admin\\metrics\\csv\\route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:x}=m,g="/api/admin/metrics/csv/route";function _(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:v})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[8948,5972,4738],()=>t(55067));module.exports=s})();