"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4214],{17512:function(e,t,a){a.d(t,{H:function(){return o}});var s=a(57437);a(2265);var r=a(27648),i=a(99376),n=a(14938),l=a(5005),c=a(40340),d=a(95805);let o=()=>{let e=(0,i.usePathname)(),t="flex items-center gap-2 px-4 py-2 rounded-lg transition-all";return(0,s.jsx)("div",{className:"bg-gray-900 text-white shadow-lg",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(r.default,{href:"/",className:"text-xl font-bold hover:text-gray-300 transition",children:"\uD83D\uDE9B Freight Management"})}),(0,s.jsxs)("nav",{className:"flex gap-1",children:[(0,s.jsxs)(r.default,{href:"/",className:"".concat(t," ").concat("/"===e?"bg-white text-gray-900 font-semibold":"hover:bg-gray-800 text-gray-300"),children:[(0,s.jsx)(n.Z,{size:18}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Home"})]}),(0,s.jsxs)(r.default,{href:"/freight-broker-dashboard",className:"".concat(t," ").concat("/freight-broker-dashboard"===e?"bg-white text-gray-900 font-semibold":"hover:bg-gray-800 text-gray-300"),children:[(0,s.jsx)(l.Z,{size:18}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Freight Broker"})]}),(0,s.jsxs)(r.default,{href:"/owner-operator-dashboard",className:"".concat(t," ").concat("/owner-operator-dashboard"===e?"bg-white text-gray-900 font-semibold":"hover:bg-gray-800 text-gray-300"),children:[(0,s.jsx)(c.Z,{size:18}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Owner Operator"})]}),(0,s.jsxs)(r.default,{href:"/fleet-manager-dashboard",className:"".concat(t," ").concat("/fleet-manager-dashboard"===e?"bg-white text-gray-900 font-semibold":"hover:bg-gray-800 text-gray-300"),children:[(0,s.jsx)(d.Z,{size:18}),(0,s.jsx)("span",{className:"hidden md:inline",children:"Fleet Manager"})]})]})]})})})}},74214:function(e,t,a){a.d(t,{Z:function(){return w}});var s=a(57437),r=a(2265),i=a(95805),n=a(44794),l=a(95252),c=a(70525),d=a(40340),o=a(48736),m=a(91351),x=a(29133);class p{static calculateRate(e,t,a,s){let r=this.BASE_RATE_PER_MILE;r*=({dry_van:1,reefer:1.3,flatbed:1.2,step_deck:1.4,tanker:1.5})[a]||1,t>4e4&&(r*=1.1);let i=e*r,n=i*this.FUEL_SURCHARGE_PERCENTAGE,l=i+n,c=null!=s?s:this.TARGET_MARGIN_PERCENTAGE,d=l/(1-c);return{baseRate:Math.round(100*i)/100,fuelSurcharge:Math.round(100*n)/100,totalCarrierRate:Math.round(100*l)/100,suggestedCustomerRate:Math.round(100*d)/100,margin:Math.round(100*(d-l))/100,marginPercentage:Math.round(1e4*c)/100}}static calculateMargin(e,t){let a=e-t;return{margin:Math.round(100*a)/100,marginPercentage:Math.round(a/e*1e4)/100}}static calculateDistance(e,t,a,s){let r=this.toRad(a-e),i=this.toRad(s-t),n=Math.sin(r/2)*Math.sin(r/2)+Math.cos(this.toRad(e))*Math.cos(this.toRad(a))*Math.sin(i/2)*Math.sin(i/2);return Math.round(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*3959)}static toRad(e){return Math.PI/180*e}}p.BASE_RATE_PER_MILE=2,p.FUEL_SURCHARGE_PERCENTAGE=.15,p.TARGET_MARGIN_PERCENTAGE=.2;class u{static findMatchingCarriers(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return t.filter(e=>"approved"===e.status&&e.insuranceVerified).map(t=>{let{score:a,reasons:s}=this.calculateMatchScore(e,t);return{carrier:t,score:a,reasons:s}}).sort((e,t)=>t.score-e.score).slice(0,a)}static calculateMatchScore(e,t){let a=0,s=[];return t.rating>=4.5?(a+=30,s.push("Excellent rating")):t.rating>=4?(a+=20,s.push("Good rating")):t.rating>=3.5&&(a+=10,s.push("Average rating")),t.onTimeDeliveryRate>=95?(a+=30,s.push("Excellent on-time delivery")):t.onTimeDeliveryRate>=90?(a+=20,s.push("Good on-time delivery")):t.onTimeDeliveryRate>=85&&(a+=10,s.push("Average on-time delivery")),t.totalLoads>=100?(a+=20,s.push("Highly experienced")):t.totalLoads>=50?(a+=15,s.push("Experienced")):t.totalLoads>=20&&(a+=10,s.push("Moderately experienced")),t.insuranceVerified&&(a+=20,s.push("Insurance verified")),{score:a,reasons:s}}static getRecommendedRate(e,t){if(0===e.length)return t;let a=e[0];return a.score>=80?.95*t:a.score>=60?.98*t:t}}let h=m.Ry({customerName:m.Z_().min(2,"Customer name is required"),pickupAddress:m.Z_().min(5,"Pickup address is required"),pickupCity:m.Z_().min(2,"Pickup city is required"),pickupState:m.Z_().length(2,"State must be 2 characters"),pickupZip:m.Z_().regex(/^\d{5}$/,"ZIP must be 5 digits"),deliveryAddress:m.Z_().min(5,"Delivery address is required"),deliveryCity:m.Z_().min(2,"Delivery city is required"),deliveryState:m.Z_().length(2,"State must be 2 characters"),deliveryZip:m.Z_().regex(/^\d{5}$/,"ZIP must be 5 digits"),pickupDate:m.Z_().min(1,"Pickup date is required"),deliveryDate:m.Z_().min(1,"Delivery date is required"),equipmentType:m.Km(["dry_van","reefer","flatbed","step_deck","tanker"]),weight:m.Rx().min(1,"Weight must be greater than 0"),distance:m.Rx().min(1,"Distance must be greater than 0"),commodity:m.Z_().min(2,"Commodity description is required"),customerRate:m.Rx().min(1,"Customer rate must be greater than 0"),specialInstructions:m.Z_().optional()}),g=e=>{let{isOpen:t,onClose:a,onCreateLoad:i,carriers:n}=e,[l,c]=(0,r.useState)({equipmentType:"dry_van"}),[d,o]=(0,r.useState)({}),[m,g]=(0,r.useState)(null),[y,b]=(0,r.useState)([]),[v,N]=(0,r.useState)(!1),[j,f]=(0,r.useState)(!1);if(!t)return null;let w=(e,t)=>{c(a=>({...a,[e]:t})),d[e]&&o(t=>{let a={...t};return delete a[e],a})},C=async e=>{e.preventDefault(),o({});try{let e=h.parse(l);N(!0);let t={id:"LOAD-".concat(Date.now()),customerId:"CUST-".concat(Date.now()),customerName:e.customerName,status:"posted",pickupLocation:{address:e.pickupAddress,city:e.pickupCity,state:e.pickupState,zipCode:e.pickupZip},deliveryLocation:{address:e.deliveryAddress,city:e.deliveryCity,state:e.deliveryState,zipCode:e.deliveryZip},pickupDate:e.pickupDate,deliveryDate:e.deliveryDate,equipmentType:e.equipmentType,weight:e.weight,distance:e.distance,commodity:e.commodity,customerRate:e.customerRate,specialInstructions:e.specialInstructions,documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await i(t),a(),c({equipmentType:"dry_van"}),g(null),b([])}catch(e){if(e instanceof x.jm){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),o(t)}}finally{N(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 overflow-y-auto",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full m-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New Load"}),(0,s.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:C,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Customer Information"}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),(0,s.jsx)("input",{type:"text",value:l.customerName||"",onChange:e=>w("customerName",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.customerName?"border-red-500":"border-gray-300")}),d.customerName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.customerName})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Pickup Location"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,s.jsx)("input",{type:"text",value:l.pickupAddress||"",onChange:e=>w("pickupAddress",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.pickupAddress?"border-red-500":"border-gray-300")}),d.pickupAddress&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.pickupAddress})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,s.jsx)("input",{type:"text",value:l.pickupCity||"",onChange:e=>w("pickupCity",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.pickupCity?"border-red-500":"border-gray-300")}),d.pickupCity&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.pickupCity})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,s.jsx)("input",{type:"text",value:l.pickupState||"",onChange:e=>w("pickupState",e.target.value.toUpperCase()),maxLength:2,className:"w-full px-3 py-2 border rounded-lg ".concat(d.pickupState?"border-red-500":"border-gray-300")}),d.pickupState&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.pickupState})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),(0,s.jsx)("input",{type:"text",value:l.pickupZip||"",onChange:e=>w("pickupZip",e.target.value),maxLength:5,className:"w-full px-3 py-2 border rounded-lg ".concat(d.pickupZip?"border-red-500":"border-gray-300")}),d.pickupZip&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.pickupZip})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Date *"}),(0,s.jsx)("input",{type:"date",value:l.pickupDate||"",onChange:e=>w("pickupDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.pickupDate?"border-red-500":"border-gray-300")}),d.pickupDate&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.pickupDate})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Delivery Location"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,s.jsx)("input",{type:"text",value:l.deliveryAddress||"",onChange:e=>w("deliveryAddress",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.deliveryAddress?"border-red-500":"border-gray-300")}),d.deliveryAddress&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryAddress})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City *"}),(0,s.jsx)("input",{type:"text",value:l.deliveryCity||"",onChange:e=>w("deliveryCity",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.deliveryCity?"border-red-500":"border-gray-300")}),d.deliveryCity&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryCity})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State *"}),(0,s.jsx)("input",{type:"text",value:l.deliveryState||"",onChange:e=>w("deliveryState",e.target.value.toUpperCase()),maxLength:2,className:"w-full px-3 py-2 border rounded-lg ".concat(d.deliveryState?"border-red-500":"border-gray-300")}),d.deliveryState&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryState})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ZIP Code *"}),(0,s.jsx)("input",{type:"text",value:l.deliveryZip||"",onChange:e=>w("deliveryZip",e.target.value),maxLength:5,className:"w-full px-3 py-2 border rounded-lg ".concat(d.deliveryZip?"border-red-500":"border-gray-300")}),d.deliveryZip&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryZip})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Delivery Date *"}),(0,s.jsx)("input",{type:"date",value:l.deliveryDate||"",onChange:e=>w("deliveryDate",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.deliveryDate?"border-red-500":"border-gray-300")}),d.deliveryDate&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.deliveryDate})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Load Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Equipment Type *"}),(0,s.jsxs)("select",{value:l.equipmentType,onChange:e=>w("equipmentType",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"dry_van",children:"Dry Van"}),(0,s.jsx)("option",{value:"reefer",children:"Reefer"}),(0,s.jsx)("option",{value:"flatbed",children:"Flatbed"}),(0,s.jsx)("option",{value:"step_deck",children:"Step Deck"}),(0,s.jsx)("option",{value:"tanker",children:"Tanker"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Weight (lbs) *"}),(0,s.jsx)("input",{type:"number",value:l.weight||"",onChange:e=>w("weight",parseFloat(e.target.value)),className:"w-full px-3 py-2 border rounded-lg ".concat(d.weight?"border-red-500":"border-gray-300")}),d.weight&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.weight})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Distance (miles) *"}),(0,s.jsx)("input",{type:"number",value:l.distance||"",onChange:e=>w("distance",parseFloat(e.target.value)),className:"w-full px-3 py-2 border rounded-lg ".concat(d.distance?"border-red-500":"border-gray-300")}),d.distance&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.distance})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Commodity *"}),(0,s.jsx)("input",{type:"text",value:l.commodity||"",onChange:e=>w("commodity",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(d.commodity?"border-red-500":"border-gray-300")}),d.commodity&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.commodity})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Special Instructions"}),(0,s.jsx)("textarea",{value:l.specialInstructions||"",onChange:e=>w("specialInstructions",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Rate Calculator"}),(0,s.jsx)("button",{type:"button",onClick:()=>{if(!l.distance||!l.weight||!l.equipmentType){alert("Please fill in distance, weight, and equipment type to calculate rate");return}let e=p.calculateRate(l.distance,l.weight,l.equipmentType);g(e),c(t=>({...t,customerRate:e.suggestedCustomerRate}))},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Calculate Rate"})]}),m&&(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Base Rate:"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",m.baseRate.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Fuel Surcharge:"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",m.fuelSurcharge.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Total Carrier Rate:"}),(0,s.jsxs)("p",{className:"font-semibold",children:["$",m.totalCarrierRate.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Suggested Customer Rate:"}),(0,s.jsxs)("p",{className:"font-semibold text-green-600",children:["$",m.suggestedCustomerRate.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Expected Margin:"}),(0,s.jsxs)("p",{className:"font-semibold text-green-600",children:["$",m.margin.toLocaleString()," (",m.marginPercentage,"%)"]})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Rate ($) *"}),(0,s.jsx)("input",{type:"number",value:l.customerRate||"",onChange:e=>w("customerRate",parseFloat(e.target.value)),className:"w-full px-3 py-2 border rounded-lg ".concat(d.customerRate?"border-red-500":"border-gray-300")}),d.customerRate&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:d.customerRate})]}),j&&y.length>0&&(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:["Matched Carriers (",y.length,")"]}),(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:y.map(e=>(0,s.jsx)("div",{className:"bg-white p-3 rounded border border-gray-200",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:e.carrier.companyName}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["MC# ",e.carrier.mcNumber]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.reasons.join(" • ")})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"bg-blue-600 text-white px-2 py-1 rounded text-sm font-semibold",children:["Score: ",e.score]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["⭐ ",e.carrier.rating.toFixed(1)]})]})]})},e.carrier.id))})]}),(0,s.jsxs)("div",{className:"flex justify-between gap-4 pt-4 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{try{let e=h.parse(l),t={customerName:e.customerName,pickupLocation:{address:e.pickupAddress,city:e.pickupCity,state:e.pickupState,zipCode:e.pickupZip},deliveryLocation:{address:e.deliveryAddress,city:e.deliveryCity,state:e.deliveryState,zipCode:e.deliveryZip},pickupDate:e.pickupDate,deliveryDate:e.deliveryDate,equipmentType:e.equipmentType,weight:e.weight,distance:e.distance,commodity:e.commodity,customerRate:e.customerRate},a=u.findMatchingCarriers(t,n);b(a),f(!0)}catch(e){if(e instanceof x.jm){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),o(t)}}},className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold",children:"Find Matching Carriers"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:a,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-semibold",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:v,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold disabled:bg-gray-400",children:v?"Creating...":"Create Load"})]})]})]})]})})};class y{static async verifyMCNumber(e){try{await new Promise(e=>setTimeout(e,1e3));let t=e.length>=6;return{mcNumber:e,legalName:"Carrier Company ".concat(e),status:t?"active":"inactive",insuranceOnFile:t,insuranceExpiry:t?new Date(Date.now()+31536e6).toISOString():void 0,dotNumber:"".concat(parseInt(e)+1e6)}}catch(t){throw Error("Failed to verify MC#: ".concat(e))}}static async verifyInsurance(e){try{return await new Promise(e=>setTimeout(e,800)),{verified:!0,expiryDate:new Date(Date.now()+31536e6).toISOString(),coverageAmount:1e6}}catch(e){throw Error("Insurance verification failed")}}static isInsuranceExpiringSoon(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=new Date(e),s=new Date;return(a.getTime()-s.getTime())/864e5<=t}}let b=m.Ry({companyName:m.Z_().min(2,"Company name is required"),mcNumber:m.Z_().min(6,"MC number must be at least 6 digits"),dotNumber:m.Z_().min(7,"DOT number must be at least 7 digits"),contactName:m.Z_().min(2,"Contact name is required"),email:m.Z_().email("Invalid email address"),phone:m.Z_().regex(/^\d{10}$/,"Phone must be 10 digits")}),v=e=>{var t,a,i;let{isOpen:n,onClose:l,onAddCarrier:c}=e,[d,o]=(0,r.useState)({}),[m,p]=(0,r.useState)({}),[u,h]=(0,r.useState)(!1),[g,v]=(0,r.useState)(null),[N,j]=(0,r.useState)(!1);if(!n)return null;let f=(e,t)=>{o(a=>({...a,[e]:t})),m[e]&&p(t=>{let a={...t};return delete a[e],a})},w=async()=>{if(!d.mcNumber||d.mcNumber.length<6){p(e=>({...e,mcNumber:"Please enter a valid MC number"}));return}h(!0),v(null);try{let e=await y.verifyMCNumber(d.mcNumber),t=await y.verifyInsurance(d.mcNumber);v({...e,insurance:t}),"active"===e.status&&o(t=>({...t,companyName:e.legalName,dotNumber:e.dotNumber}))}catch(e){p(e=>({...e,mcNumber:"Verification failed. Please check the MC number."}))}finally{h(!1)}},C=async e=>{e.preventDefault(),p({});try{var t,a;let e=b.parse(d);if(!g||"active"!==g.status){alert("Please verify the MC number before submitting");return}j(!0);let s={id:"CARR-".concat(Date.now()),companyName:e.companyName,mcNumber:e.mcNumber,dotNumber:e.dotNumber,contactName:e.contactName,email:e.email,phone:e.phone,status:"approved",rating:0,totalLoads:0,onTimeDeliveryRate:0,insuranceVerified:(null===(t=g.insurance)||void 0===t?void 0:t.verified)||!1,insuranceExpiry:(null===(a=g.insurance)||void 0===a?void 0:a.expiryDate)||"",authorityStatus:g.status,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};await c(s),l(),o({}),v(null)}catch(e){if(e instanceof x.jm){let t={};e.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),p(t)}}finally{j(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full m-4 max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"sticky top-0 bg-white border-b px-6 py-4 flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Onboard New Carrier"}),(0,s.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,s.jsxs)("form",{onSubmit:C,className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"MC Number Verification"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("input",{type:"text",placeholder:"Enter MC Number",value:d.mcNumber||"",onChange:e=>f("mcNumber",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(m.mcNumber?"border-red-500":"border-gray-300")}),m.mcNumber&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.mcNumber})]}),(0,s.jsx)("button",{type:"button",onClick:w,disabled:u,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold disabled:bg-gray-400",children:u?"Verifying...":"Verify"})]}),g&&(0,s.jsx)("div",{className:"mt-4 p-3 bg-white rounded border",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Status:"}),(0,s.jsx)("p",{className:"font-semibold ".concat("active"===g.status?"text-green-600":"text-red-600"),children:g.status.toUpperCase()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"DOT Number:"}),(0,s.jsx)("p",{className:"font-semibold",children:g.dotNumber})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Insurance:"}),(0,s.jsx)("p",{className:"font-semibold ".concat((null===(t=g.insurance)||void 0===t?void 0:t.verified)?"text-green-600":"text-red-600"),children:(null===(a=g.insurance)||void 0===a?void 0:a.verified)?"VERIFIED ✓":"NOT VERIFIED"})]}),(null===(i=g.insurance)||void 0===i?void 0:i.expiryDate)&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Insurance Expiry:"}),(0,s.jsx)("p",{className:"font-semibold",children:new Date(g.insurance.expiryDate).toLocaleDateString()})]})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Company Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),(0,s.jsx)("input",{type:"text",value:d.companyName||"",onChange:e=>f("companyName",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(m.companyName?"border-red-500":"border-gray-300")}),m.companyName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.companyName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DOT Number *"}),(0,s.jsx)("input",{type:"text",value:d.dotNumber||"",onChange:e=>f("dotNumber",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(m.dotNumber?"border-red-500":"border-gray-300")}),m.dotNumber&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.dotNumber})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-900",children:"Contact Information"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name *"}),(0,s.jsx)("input",{type:"text",value:d.contactName||"",onChange:e=>f("contactName",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(m.contactName?"border-red-500":"border-gray-300")}),m.contactName&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.contactName})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),(0,s.jsx)("input",{type:"email",value:d.email||"",onChange:e=>f("email",e.target.value),className:"w-full px-3 py-2 border rounded-lg ".concat(m.email?"border-red-500":"border-gray-300")}),m.email&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.email})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone (10 digits) *"}),(0,s.jsx)("input",{type:"tel",value:d.phone||"",onChange:e=>f("phone",e.target.value.replace(/\D/g,"")),maxLength:10,className:"w-full px-3 py-2 border rounded-lg ".concat(m.phone?"border-red-500":"border-gray-300")}),m.phone&&(0,s.jsx)("p",{className:"text-red-500 text-sm mt-1",children:m.phone})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t",children:[(0,s.jsx)("button",{type:"button",onClick:l,className:"px-6 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 font-semibold",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:N||!g,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold disabled:bg-gray-400",children:N?"Adding...":"Add Carrier"})]})]})]})})};var N=a(53375);class j{static generateRateConfirmation(e,t){var a;let s=new N.ZP,r=s.internal.pageSize.getWidth(),i=20;return s.setFontSize(20),s.setFont("helvetica","bold"),s.text("RATE CONFIRMATION",r/2,i,{align:"center"}),i+=15,s.setFontSize(10),s.setFont("helvetica","normal"),s.text("Broker: ".concat(t.name),20,i),i+=6,s.text("MC#: ".concat(t.mcNumber),20,i),i+=6,s.text("Contact: ".concat(t.phone),20,i),i+=15,s.setFont("helvetica","bold"),s.text("LOAD DETAILS",20,i),i+=8,s.setFont("helvetica","normal"),s.text("Load ID: ".concat(e.id),20,i),i+=6,s.text("Commodity: ".concat(e.commodity),20,i),i+=6,s.text("Weight: ".concat(e.weight.toLocaleString()," lbs"),20,i),i+=6,s.text("Equipment: ".concat(e.equipmentType.replace("_"," ").toUpperCase()),20,i),i+=15,s.setFont("helvetica","bold"),s.text("PICKUP",20,i),i+=8,s.setFont("helvetica","normal"),s.text("Date: ".concat(new Date(e.pickupDate).toLocaleDateString()),20,i),i+=6,s.text("Location: ".concat(this.formatLocation(e.pickupLocation)),20,i),i+=15,s.setFont("helvetica","bold"),s.text("DELIVERY",20,i),i+=8,s.setFont("helvetica","normal"),s.text("Date: ".concat(new Date(e.deliveryDate).toLocaleDateString()),20,i),i+=6,s.text("Location: ".concat(this.formatLocation(e.deliveryLocation)),20,i),i+=15,s.setFont("helvetica","bold"),s.setFontSize(12),s.text("CARRIER RATE: $".concat((null===(a=e.carrierRate)||void 0===a?void 0:a.toLocaleString())||"0"),20,i),i+=15,s.setFontSize(10),s.setFont("helvetica","bold"),s.text("TERMS AND CONDITIONS",20,i),i+=8,s.setFont("helvetica","normal"),s.setFontSize(8),["1. Carrier agrees to provide transportation services as specified above.","2. Payment terms: Net 30 days from delivery with signed POD.","3. Carrier must maintain proper insurance coverage throughout transit.","4. Any claims must be filed within 48 hours of delivery.","5. Carrier is responsible for all loading and securing of freight."].forEach(e=>{s.text(e,20,i),i+=5}),i+=20,s.setFontSize(10),s.line(20,i,90,i),s.line(120,i,190,i),i+=5,s.text("Broker Signature",20,i),s.text("Carrier Signature",120,i),i+=5,s.text("Date: ".concat(new Date().toLocaleDateString()),20,i),s.output("blob")}static generateBOL(e){let t=new N.ZP,a=t.internal.pageSize.getWidth(),s=20;if(t.setFontSize(20),t.setFont("helvetica","bold"),t.text("BILL OF LADING",a/2,s,{align:"center"}),s+=10,t.setFontSize(10),t.text("BOL #: ".concat(e.id),a/2,s,{align:"center"}),s+=15,t.setFont("helvetica","bold"),t.text("SHIPPER",20,s),s+=8,t.setFont("helvetica","normal"),t.text(e.customerName,20,s),s+=6,t.text(this.formatLocation(e.pickupLocation),20,s),s+=15,t.setFont("helvetica","bold"),t.text("CONSIGNEE",20,s),s+=8,t.setFont("helvetica","normal"),t.text(this.formatLocation(e.deliveryLocation),20,s),s+=15,t.setFont("helvetica","bold"),t.text("CARRIER",20,s),s+=8,t.setFont("helvetica","normal"),t.text(e.carrierName||"TBD",20,s),s+=15,t.setFont("helvetica","bold"),t.text("FREIGHT DESCRIPTION",20,s),s+=8,t.setFont("helvetica","normal"),t.text("Commodity: ".concat(e.commodity),20,s),s+=6,t.text("Weight: ".concat(e.weight.toLocaleString()," lbs"),20,s),s+=6,t.text("Equipment Type: ".concat(e.equipmentType.replace("_"," ").toUpperCase()),20,s),s+=15,e.specialInstructions){t.setFont("helvetica","bold"),t.text("SPECIAL INSTRUCTIONS",20,s),s+=8,t.setFont("helvetica","normal");let a=t.splitTextToSize(e.specialInstructions,170);t.text(a,20,s),s+=(Array.isArray(a)?a.length:1)*6+10}return s=Math.max(s,220),t.line(20,s,90,s),t.line(120,s,190,s),s+=5,t.text("Shipper Signature/Date",20,s),t.text("Driver Signature/Date",120,s),t.output("blob")}static generateInvoice(e,t){let a=new N.ZP,s=a.internal.pageSize.getWidth(),r=20;return a.setFontSize(24),a.setFont("helvetica","bold"),a.text("INVOICE",s/2,r,{align:"center"}),r+=15,a.setFontSize(10),a.setFont("helvetica","normal"),a.text("Invoice #: ".concat(t),20,r),r+=6,a.text("Date: ".concat(new Date().toLocaleDateString()),20,r),r+=6,a.text("Load ID: ".concat(e.id),20,r),r+=15,a.setFont("helvetica","bold"),a.text("BILL TO:",20,r),r+=8,a.setFont("helvetica","normal"),a.text(e.customerName,20,r),r+=20,a.setFont("helvetica","bold"),a.text("Description",20,r),a.text("Amount",150,r),r+=8,a.line(20,r,190,r),r+=8,a.setFont("helvetica","normal"),a.text("Freight from ".concat(e.pickupLocation.city,", ").concat(e.pickupLocation.state),20,r),a.text("$".concat(e.customerRate.toLocaleString()),150,r),r+=6,a.text("to ".concat(e.deliveryLocation.city,", ").concat(e.deliveryLocation.state),20,r),r+=10,a.line(20,r,190,r),r+=8,a.setFont("helvetica","bold"),a.setFontSize(12),a.text("TOTAL DUE:",120,r),a.text("$".concat(e.customerRate.toLocaleString()),150,r),r+=15,a.setFontSize(10),a.setFont("helvetica","normal"),a.text("Payment Terms: Net 30 Days",20,r),r+=6,a.text("Due Date: ".concat(new Date(Date.now()+2592e6).toLocaleDateString()),20,r),a.output("blob")}static formatLocation(e){return"".concat(e.address,", ").concat(e.city,", ").concat(e.state," ").concat(e.zipCode)}}var f=a(17512),w=e=>{let{title:t}=e,[a,m]=(0,r.useState)([]),[x,p]=(0,r.useState)([]),[u,h]=(0,r.useState)([]),[b,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(!1),[S,D]=(0,r.useState)(!1),[k,R]=(0,r.useState)("loads");(0,r.useEffect)(()=>{L()},[]),(0,r.useEffect)(()=>{I()},[a]);let L=()=>{p([{id:"CARR-1",companyName:"Swift Transportation",mcNumber:"123456",dotNumber:"7891011",contactName:"John Smith",email:"john@swift.com",phone:"5551234567",status:"approved",rating:4.8,totalLoads:150,onTimeDeliveryRate:96,insuranceVerified:!0,insuranceExpiry:new Date(Date.now()+31536e6).toISOString(),authorityStatus:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"CARR-2",companyName:"Prime Inc",mcNumber:"234567",dotNumber:"8901112",contactName:"Sarah Johnson",email:"sarah@primeinc.com",phone:"5552345678",status:"approved",rating:4.6,totalLoads:120,onTimeDeliveryRate:94,insuranceVerified:!0,insuranceExpiry:new Date(Date.now()+2592e7).toISOString(),authorityStatus:"active",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]),m([{id:"LOAD-1",customerId:"CUST-1",customerName:"Walmart Distribution",carrierId:"CARR-1",carrierName:"Swift Transportation",status:"in_transit",pickupLocation:{address:"123 Industrial Blvd",city:"Dallas",state:"TX",zipCode:"75201"},deliveryLocation:{address:"456 Commerce St",city:"Phoenix",state:"AZ",zipCode:"85001"},pickupDate:new Date(Date.now()+864e5).toISOString(),deliveryDate:new Date(Date.now()+2592e5).toISOString(),equipmentType:"dry_van",weight:42e3,distance:1050,commodity:"Consumer Electronics",customerRate:3500,carrierRate:2800,margin:700,marginPercentage:20,documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"LOAD-2",customerId:"CUST-2",customerName:"Target Logistics",carrierId:"CARR-2",carrierName:"Prime Inc",status:"delivered",pickupLocation:{address:"789 Warehouse Way",city:"Chicago",state:"IL",zipCode:"60601"},deliveryLocation:{address:"321 Distribution Dr",city:"Atlanta",state:"GA",zipCode:"30301"},pickupDate:new Date(Date.now()-432e6).toISOString(),deliveryDate:new Date(Date.now()-1728e5).toISOString(),equipmentType:"reefer",weight:38e3,distance:750,commodity:"Frozen Foods",customerRate:2800,carrierRate:2300,margin:500,marginPercentage:17.86,documents:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}])},I=()=>{let e=a.reduce((e,t)=>e+t.customerRate,0),t=a.reduce((e,t)=>e+(t.carrierRate||0),0),s=e-t;N({totalRevenue:e,totalCost:t,totalMargin:s,averageMarginPercentage:e>0?s/e*100:0,loadsByStatus:a.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),revenueByCustomer:Object.values(a.reduce((e,t)=>(e[t.customerId]||(e[t.customerId]={customerId:t.customerId,customerName:t.customerName,revenue:0}),e[t.customerId].revenue+=t.customerRate,e),{})),marginByLoad:a.filter(e=>e.margin).map(e=>({loadId:e.id,margin:e.margin,marginPercentage:e.marginPercentage})).sort((e,t)=>t.margin-e.margin)})},A=async e=>{m(t=>[...t,e])},E=async e=>{p(t=>[...t,e])},T=(e,t)=>{let a,s;switch(e){case"rate_confirmation":a=j.generateRateConfirmation(t,{name:"ABC Freight Brokers",mcNumber:"999888",phone:"555-000-0000"}),s="rate_confirmation_".concat(t.id,".pdf");break;case"bol":a=j.generateBOL(t),s="bol_".concat(t.id,".pdf");break;case"invoice":a=j.generateInvoice(t,"INV-".concat(Date.now())),s="invoice_".concat(t.id,".pdf")}let r=URL.createObjectURL(a),i=document.createElement("a");i.href=r,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)},F=e=>({posted:"bg-yellow-100 text-yellow-800",assigned:"bg-blue-100 text-blue-800",in_transit:"bg-purple-100 text-purple-800",delivered:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"})[e]||"bg-gray-100 text-gray-800",_=e=>({approved:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800",suspended:"bg-gray-100 text-gray-800"})[e]||"bg-gray-100 text-gray-800";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.H,{}),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t||"Freight Broker Dashboard"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage loads, carriers, and documents"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold flex items-center gap-2",children:[(0,s.jsx)(i.Z,{size:20}),"Add Carrier"]}),(0,s.jsxs)("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold flex items-center gap-2",children:[(0,s.jsx)(n.Z,{size:20}),"Post Load"]})]})]})})}),b&&(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Revenue"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["$",b.totalRevenue.toLocaleString()]})]}),(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,s.jsx)(l.Z,{className:"text-green-600",size:24})})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Margin"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",b.totalMargin.toLocaleString()]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[b.averageMarginPercentage.toFixed(1),"% avg"]})]}),(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,s.jsx)(c.Z,{className:"text-blue-600",size:24})})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active Loads"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a.length}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[b.loadsByStatus.in_transit||0," in transit"]})]}),(0,s.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,s.jsx)(d.Z,{className:"text-purple-600",size:24})})]})}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Active Carriers"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:x.filter(e=>"approved"===e.status).length}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[x.length," total"]})]}),(0,s.jsx)("div",{className:"bg-yellow-100 p-3 rounded-full",children:(0,s.jsx)(i.Z,{className:"text-yellow-600",size:24})})]})})]})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:["loads","carriers","documents","analytics"].map(e=>(0,s.jsx)("button",{onClick:()=>R(e),className:"".concat(k===e?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm capitalize"),children:e},e))})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:["loads"===k&&(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Load ID"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Route"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Carrier"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rate"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Margin"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(e=>{var t;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.id}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.customerName}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,s.jsxs)("div",{children:[e.pickupLocation.city,", ",e.pickupLocation.state]}),(0,s.jsxs)("div",{className:"text-gray-500",children:["→ ",e.deliveryLocation.city,", ",e.deliveryLocation.state]}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:[e.distance," miles"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.carrierName||"Unassigned"}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(F(e.status)),children:e.status.replace("_"," ").toUpperCase()})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.customerRate.toLocaleString()]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.margin?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-green-600 font-semibold",children:["$",e.margin.toLocaleString()]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[null===(t=e.marginPercentage)||void 0===t?void 0:t.toFixed(1),"%"]})]}):(0,s.jsx)("span",{className:"text-gray-400",children:"—"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>T("rate_confirmation",e),className:"text-blue-600 hover:text-blue-800 text-xs",title:"Generate Rate Confirmation",children:"RC"}),(0,s.jsx)("button",{onClick:()=>T("bol",e),className:"text-green-600 hover:text-green-800 text-xs",title:"Generate BOL",children:"BOL"}),(0,s.jsx)("button",{onClick:()=>T("invoice",e),className:"text-purple-600 hover:text-purple-800 text-xs",title:"Generate Invoice",children:"INV"})]})})]},e.id)})})]})}),"carriers"===k&&(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Company"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"MC# / DOT#"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Contact"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Rating"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Performance"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Insurance"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:e.companyName}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,s.jsxs)("div",{children:["MC# ",e.mcNumber]}),(0,s.jsxs)("div",{className:"text-gray-500",children:["DOT# ",e.dotNumber]})]}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,s.jsx)("div",{children:e.contactName}),(0,s.jsx)("div",{className:"text-gray-500",children:e.email}),(0,s.jsx)("div",{className:"text-gray-500",children:e.phone})]}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"text-yellow-500 mr-1",children:"⭐"}),(0,s.jsx)("span",{className:"font-semibold",children:e.rating.toFixed(1)})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900",children:[(0,s.jsxs)("div",{children:[e.totalLoads," loads"]}),(0,s.jsxs)("div",{className:"text-green-600",children:[e.onTimeDeliveryRate,"% on-time"]})]}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm",children:e.insuranceVerified?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"✓ Verified"}),e.insuranceExpiry&&y.isInsuranceExpiringSoon(e.insuranceExpiry)&&(0,s.jsx)("span",{className:"px-2 py-0.5 text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Expiring Soon"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Exp: ",new Date(e.insuranceExpiry).toLocaleDateString()]})]}):(0,s.jsx)("span",{className:"text-red-600",children:"Not Verified"})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(_(e.status)),children:e.status.toUpperCase()})})]},e.id))})]})}),"documents"===k&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Document Management"}),(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.id}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[e.pickupLocation.city," → ",e.deliveryLocation.city]})]}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(F(e.status)),children:e.status.replace("_"," ").toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>T("rate_confirmation",e),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:[(0,s.jsx)(o.Z,{size:16,className:"inline mr-1"}),"Rate Confirmation"]}),(0,s.jsxs)("button",{onClick:()=>T("bol",e),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:[(0,s.jsx)(o.Z,{size:16,className:"inline mr-1"}),"Bill of Lading"]}),(0,s.jsxs)("button",{onClick:()=>T("invoice",e),className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm",children:[(0,s.jsx)(o.Z,{size:16,className:"inline mr-1"}),"Invoice"]})]})]},e.id))})]}),"analytics"===k&&b&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Revenue by Customer"}),(0,s.jsx)("div",{className:"space-y-3",children:b.revenueByCustomer.map(e=>(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"font-medium",children:e.customerName}),(0,s.jsxs)("span",{className:"text-green-600 font-semibold",children:["$",e.revenue.toLocaleString()]})]},e.customerId))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Margin Analysis by Load"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Load ID"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Margin ($)"}),(0,s.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-500",children:"Margin (%)"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-gray-200",children:b.marginByLoad.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-4 py-2 text-sm",children:e.loadId}),(0,s.jsxs)("td",{className:"px-4 py-2 text-sm text-green-600 font-semibold",children:["$",e.margin.toLocaleString()]}),(0,s.jsxs)("td",{className:"px-4 py-2 text-sm",children:[e.marginPercentage.toFixed(1),"%"]})]},e.loadId))})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Load Status Distribution"}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(b.loadsByStatus).map(e=>{let[t,a]=e;return(0,s.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:a}),(0,s.jsx)("div",{className:"text-sm text-gray-600 capitalize",children:t.replace("_"," ")})]},t)})})]})]})]}),(0,s.jsx)(g,{isOpen:w,onClose:()=>C(!1),onCreateLoad:A,carriers:x}),(0,s.jsx)(v,{isOpen:S,onClose:()=>D(!1),onAddCarrier:E})]})]})}}}]);