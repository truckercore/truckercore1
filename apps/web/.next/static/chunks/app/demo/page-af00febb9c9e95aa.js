(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1298],{45528:function(e,n,t){Promise.resolve().then(t.bind(t,87892)),Promise.resolve().then(t.bind(t,7817)),Promise.resolve().then(t.bind(t,62921))},87892:function(e,n,t){"use strict";t.d(n,{PlanButton:function(){return a}});var r=t(57437),u=t(2265),l=t(62921);let s=()=>{let{supabase:e,user:n}=(0,l.$)();return(0,u.useCallback)(async function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!n)return console.error("No authenticated user found for logging event."),{error:"no_user"};let{error:u}=await e.from("behavior_events").insert([{user_id:n.id,event_type:t,properties:r}]);return{error:u}},[e,n])},a=e=>{let{planType:n,destination:t}=e,u=s(),l=async()=>{await u("plan_route",{plan_type:n,destination:t}),alert("Planning a ".concat(n," route to ").concat(t,"!"))};return(0,r.jsxs)("button",{onClick:l,className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:["Plan ",n," Route to ",t]})}},7817:function(e,n,t){"use strict";t.d(n,{ProfileDisplay:function(){return s}});var r=t(57437),u=t(62921);let l=()=>{let{profile:e}=(0,u.$)();return e},s=()=>{let e=l();return e?(0,r.jsxs)("div",{className:"p-4 border rounded shadow",children:[(0,r.jsxs)("h2",{className:"font-bold text-lg",children:["Welcome, ",e.username||e.email,"!"]}),(0,r.jsxs)("p",{children:["ID: ",e.id]})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"Please log in to see your profile."})}},62921:function(e,n,t){"use strict";t.d(n,{SupabaseProvider:function(){return c},$:function(){return v}});var r=t(57437),u=t(2265),l=t(63887),s=t(40257);function a(e,n){return n||(console.warn("[env] Missing env: ".concat(e)),"")}let o=Object.freeze({supabaseUrl:a("NEXT_PUBLIC_SUPABASE_URL","https://dummy.supabase.co"),supabaseAnonKey:a("NEXT_PUBLIC_SUPABASE_ANON_KEY","dummy_key_here_for_build"),mapToken:s.env.NEXT_PUBLIC_MAP_TOKEN,featureDefaults:{}}),i=(0,l.eI)(o.supabaseUrl||"",o.supabaseAnonKey||"",{auth:{persistSession:!0,autoRefreshToken:!0}}),d=(0,u.createContext)(void 0),c=e=>{let{children:n}=e,[t,l]=(0,u.useState)(null),[s,a]=(0,u.useState)(null),[o,c]=(0,u.useState)(null);return(0,u.useEffect)(()=>{let e=!0;(async()=>{var n,r,u;let{data:s}=await i.auth.getSession();e&&(l(null!==(r=s.session)&&void 0!==r?r:null),a(null!==(u=null===(n=s.session)||void 0===n?void 0:n.user)&&void 0!==u?u:null),await t())})();let{data:n}=i.auth.onAuthStateChange(async(n,r)=>{var u;e&&(l(r),a(null!==(u=null==r?void 0:r.user)&&void 0!==u?u:null),await t())});async function t(){var n,t,r;let{data:u}=await i.auth.getUser(),l=null===(n=u.user)||void 0===n?void 0:n.id;if(!l){e&&c(null);return}let{data:s,error:a}=await i.from("profiles").select("*").eq("id",l).maybeSingle();e&&(a?c({id:l,email:null===(t=u.user)||void 0===t?void 0:t.email}):c({...s,email:null===(r=u.user)||void 0===r?void 0:r.email}))}return()=>{var t,r;e=!1,null==n||null===(r=n.subscription)||void 0===r||null===(t=r.unsubscribe)||void 0===t||t.call(r)}},[]),(0,r.jsx)(d.Provider,{value:{supabase:i,user:s,profile:o},children:n})},v=()=>{let e=(0,u.useContext)(d);if(!e)throw Error("useSupabase must be used within a SupabaseProvider");return e}}},function(e){e.O(0,[3887,2971,2117,1744],function(){return e(e.s=45528)}),_N_E=e.O()}]);