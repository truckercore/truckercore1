(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{12811:function(e,r,t){Promise.resolve().then(t.bind(t,15063))},99376:function(e,r,t){"use strict";var n=t(35475);t.o(n,"useParams")&&t.d(r,{useParams:function(){return n.useParams}}),t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},15063:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return a}});var n=t(57437),o=t(2265),i=t(99376);function a(){let e=(0,i.useSearchParams)(),[r,t]=(0,o.useState)(!1),[a,c]=(0,o.useState)("pro"),l=async()=>{let r=window.localStorage.getItem("user_email"),n=window.localStorage.getItem("org_id")||window.localStorage.getItem("orgId");if(!r||!n){alert("Please sign in first");return}t(!0);let o=e.get("ref")||void 0,i=e.get("utm_source")||void 0,s=e.get("utm_campaign")||void 0,c=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:a,orgId:n,email:r,referrerCode:o,utmSource:i,utmCampaign:s})}),{url:l,error:u}=await c.json();if(t(!1),u||!l){alert("Error: ".concat(u||"Unable to start checkout"));return}window.location.href=l};return(0,n.jsxs)("div",{style:{padding:48,maxWidth:600,margin:"0 auto"},children:[(0,n.jsx)("h1",{children:"Upgrade to Premium"}),(0,n.jsx)("p",{children:"Unlock full alerting, compliance automation, and analytics."}),(0,n.jsxs)("div",{style:{display:"flex",gap:24,marginTop:24},children:[(0,n.jsx)(s,{title:"Pro",price:"$49/mo",features:["Unlimited alerts","CSV exports","Priority support"],selected:"pro"===a,onSelect:()=>c("pro")}),(0,n.jsx)(s,{title:"Enterprise",price:"$149/mo",features:["All Pro features","Fleet analytics","SSO ready","Dedicated support"],selected:"enterprise"===a,onSelect:()=>c("enterprise")})]}),(0,n.jsx)("button",{onClick:l,disabled:r,style:{marginTop:32,padding:"12px 24px",fontSize:16,cursor:r?"not-allowed":"pointer",backgroundColor:"#58A6FF",color:"#fff",border:"none",borderRadius:8},children:r?"Loading...":"Subscribe to ".concat("pro"===a?"Pro":"Enterprise")})]})}function s(e){let{title:r,price:t,features:o,selected:i,onSelect:a}=e;return(0,n.jsxs)("div",{onClick:a,style:{flex:1,padding:24,border:i?"2px solid #58A6FF":"1px solid #ccc",borderRadius:8,cursor:"pointer",backgroundColor:i?"#f0f8ff":"#fff"},children:[(0,n.jsx)("h3",{children:r}),(0,n.jsx)("p",{style:{fontSize:24,fontWeight:"bold",margin:"12px 0"},children:t}),(0,n.jsx)("ul",{children:o.map(e=>(0,n.jsx)("li",{children:e},e))})]})}}},function(e){e.O(0,[2971,2117,1744],function(){return e(e.s=12811)}),_N_E=e.O()}]);