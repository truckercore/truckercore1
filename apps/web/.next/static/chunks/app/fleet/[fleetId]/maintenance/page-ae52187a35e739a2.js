(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3893],{41375:function(e,t,n){Promise.resolve().then(n.bind(n,4495))},4495:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});var i=n(57437),s=n(2265),r=n(40074);function a(e){let{params:t}=e,{fleetId:n}=t,[a,c]=s.useState([]),[l,u]=s.useState([]);return s.useEffect(()=>{let e=!0;return(async()=>{let t=new Set((await r.k6.vehicles.where("fleetId").equals(n).toArray()).map(e=>e.id)),i=await r.k6.maintenanceSchedules.toArray(),s=await r.k6.workOrders.toArray();e&&(c(i.filter(e=>t.has(e.vehicleId))),u(s.filter(e=>t.has(e.vehicleId))))})(),()=>{e=!1}},[n]),(0,i.jsxs)("div",{style:{padding:16},children:[(0,i.jsx)("h2",{children:"Maintenance"}),(0,i.jsxs)("section",{children:[(0,i.jsxs)("h3",{children:["Schedules (",a.length,")"]}),(0,i.jsx)("ul",{children:a.map(e=>{var t;return(0,i.jsxs)("li",{children:[e.vehicleId,": ",null!==(t=e.task)&&void 0!==t?t:"Task"," — next due ",new Date(e.nextDue).toLocaleDateString()]},e.id)})})]}),(0,i.jsxs)("section",{style:{marginTop:16},children:[(0,i.jsxs)("h3",{children:["Work Orders (",l.length,")"]}),(0,i.jsx)("ul",{children:l.map(e=>{var t;return(0,i.jsxs)("li",{children:[e.vehicleId,": ",null!==(t=e.title)&&void 0!==t?t:"Work Order"," — ",e.status]},e.id)})})]})]})}},40074:function(e,t,n){"use strict";n.d(t,{Cj:function(){return c},Hn:function(){return l},k6:function(){return a}});var i=n(35966),s=n(38608);class r extends i.ZP{constructor(){super("FleetManagementDB"),this.version(1).stores({vehicles:"id, fleetId, status, nextMaintenance, [fleetId+status]",fleets:"id, organizationId, name",maintenanceSchedules:"id, vehicleId, nextDue, [vehicleId+nextDue]",workOrders:"id, vehicleId, status, [vehicleId+status]",syncOperations:"id, entityType, entityId, synced, timestamp",syncConflicts:"id, entityType, entityId, resolvedAt"}),this.on("ready",async()=>{try{await (0,s.o5)()}catch(e){console.warn("[Demo] initializeDemoData failed",e)}})}}let a=new r;async function c(e){}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{limit:n=50,offset:i=0,status:s}=t,r=s?a.vehicles.where("[fleetId+status]").equals([e,s]):a.vehicles.where("fleetId").equals(e);return i&&(r=r.offset(i)),n&&(r=r.limit(n)),r.toArray()}},38608:function(e,t,n){"use strict";async function i(){}async function s(){await i()}n.d(t,{CP:function(){return s},o5:function(){return i}}),n(40074)}},function(e){e.O(0,[5966,2971,2117,1744],function(){return e(e.s=41375)}),_N_E=e.O()}]);